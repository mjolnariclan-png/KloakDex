// Pokémon data for each game
const pokedexData = {
    red: {
    1: { name: "bulbasaur", type: "Grass/Poison", image:"images/RBY Dex/bulbasaur.png" },
},
    blue: {
    1: { name: "bulbasaur", type: "Grass/Poison", image:"images/RBY Dex/bulbasaur.png" },
},
    yellow: {
    1: { name: "bulbasaur", type: "Grass/Poison", image:"images/RBY Dex/bulbasaur.png" },
},
    gold: {
    1: { name: "Chikorita", type: "Grass", image:"images/GSC Dex/chikorita.png" },
},
    silver: {
    1: { name: "Chikorita", type: "Grass", image:"images/GSC Dex/chikorita.png" },
},
    crystal: {
    1: { name: "Chikorita", type: "Grass", image:"images/GSC Dex/chikorita.png" },
},
    ruby: {
    1: { name: "Treecko", type: "Grass", image:"images/RSE Dex/treecko.png" },
},
    sapphire: {
    1: { name: "Treecko", type: "Grass", image:"images/RSE Dex/treecko.png" },
},
    emerald: {
    1: { name: "Treecko", type: "Grass", image:"images/RSE Dex/treecko.png" },
},
    firered: {
    1: { name: "bulbasaur", type: "Grass/Poison", image:"images/FRLG Dex/bulbasaur.png" },
},
    leafgreen: {
    1: { name: "bulbasaur", type: "Grass/Poison", image:"images/FRLG Dex/bulbasaur.png" },
},
    diamond:{
    1: { name: "Turtwig", type: "Grass", image:"images/DP Dex/turtwig.png" },
},
    pearl:{
    1: { name: "Turtwig", type: "Grass", image:"images/DP Dex/turtwig.png" },
},
    platinum:{
    1: { name: "Turtwig", type: "Grass", image:"images/DP Dex/turtwig.png" },
},
    heartgold: {
    1: { name: "Chikorita", type: "Grass", image:"images/HGSS Dex/chikorita.png" },
},
    soulsilver: {
    1: { name: "Chikorita", type: "Grass", image:"images/HGSS Dex/chikorita.png" },
},
    black: {
    0: { name: "victini", type: "Psychic/Fire", image: "images/BW/victini.png" },
},
    white: {
    0: { name: "victini", type: "Psychic/Fire", image: "images/BW/victini.png" },
},
    black2: {
    0: { name: "victini", type: "Psychic/Fire", image: "images/B2W2/victini.png" },
},
    white2: {
    0: { name: "victini", type: "Psychic/Fire", image: "images/B2W2/victini.png" },
},
    x: {
        fulldex:{
            0: { name: "victini", type: "Psychic/Fire", image: "images/B2W2/victini.png" },
            },
        coastal: {
            0: { name: "victini", type: "Psychic/Fire", image: "images/B2W2/victini.png" },
        },
        mountain: {
            0: { name: "victini", type: "Psychic/Fire", image: "images/B2W2/victini.png" },
        },
        central: {
            0: { name: "victini", type: "Psychic/Fire", image: "images/B2W2/victini.png" },
        }
},
    y: {
        fulldex:{
            0: { name: "victini", type: "Psychic/Fire", image: "images/B2W2/victini.png" },
            },
        coastal: {
            0: { name: "victini", type: "Psychic/Fire", image: "images/B2W2/victini.png" },
        },
        mountain: {
            0: { name: "victini", type: "Psychic/Fire", image: "images/B2W2/victini.png" },
        },
        central: {
            0: { name: "victini", type: "Psychic/Fire", image: "images/B2W2/victini.png" },
        }
},
    omegaruby: {
    0: { name: "victini", type: "Psychic/Fire", image: "images/B2W2/victini.png" },
},
    alphasapphire: {
    0: { name: "victini", type: "Psychic/Fire", image: "images/B2W2/victini.png" },
},
    pogo: {
    0: { name: "victini", type: "Psychic/Fire", image: "images/B2W2/victini.png" },
},
    sun: {
        full:{
            0: { name: "victini", type: "Psychic/Fire", image: "images/B2W2/victini.png" },
        },
        akala:{
            0: { name: "victini", type: "Psychic/Fire", image: "images/B2W2/victini.png" },
        },
        poni: {
            0: { name: "victini", type: "Psychic/Fire", image: "images/B2W2/victini.png" },
        },
        ulaula: {
            0: { name: "victini", type: "Psychic/Fire", image: "images/B2W2/victini.png" },
        },
        melemele: {
            0: { name: "victini", type: "Psychic/Fire", image: "images/B2W2/victini.png" },
        }
},
    moon: {
        full:{
            0: { name: "victini", type: "Psychic/Fire", image: "images/B2W2/victini.png" },
        },
        akala:{
            0: { name: "victini", type: "Psychic/Fire", image: "images/B2W2/victini.png" },
        },
        poni: {
            0: { name: "victini", type: "Psychic/Fire", image: "images/B2W2/victini.png" },
        },
        ulaula: {
            0: { name: "victini", type: "Psychic/Fire", image: "images/B2W2/victini.png" },
        },
        melemele: {
            0: { name: "victini", type: "Psychic/Fire", image: "images/B2W2/victini.png" },
        }
},
    ultrasun: {
        full:{
            0: { name: "victini", type: "Psychic/Fire", image: "images/B2W2/victini.png" },
        },
        akala:{
            0: { name: "victini", type: "Psychic/Fire", image: "images/B2W2/victini.png" },
        },
        poni: {
            0: { name: "victini", type: "Psychic/Fire", image: "images/B2W2/victini.png" },
        },
        ulaula: {
            0: { name: "victini", type: "Psychic/Fire", image: "images/B2W2/victini.png" },
        },
        melemele: {
            0: { name: "victini", type: "Psychic/Fire", image: "images/B2W2/victini.png" },
        }
},
    ultramoon: {
        full:{
            0: { name: "victini", type: "Psychic/Fire", image: "images/B2W2/victini.png" },
        },
        akala:{
            0: { name: "victini", type: "Psychic/Fire", image: "images/B2W2/victini.png" },
        },
        poni: {
            0: { name: "victini", type: "Psychic/Fire", image: "images/B2W2/victini.png" },
        },
        ulaula: {
            0: { name: "victini", type: "Psychic/Fire", image: "images/B2W2/victini.png" },
        },
        melemele: {
            0: { name: "victini", type: "Psychic/Fire", image: "images/B2W2/victini.png" },
        }
},
    letsgopikachu: {
    0: { name: "victini", type: "Psychic/Fire", image: "images/B2W2/victini.png" },
},
    letsgoeevee: {
    0: { name: "victini", type: "Psychic/Fire", image: "images/B2W2/victini.png" },
},
    sword: {
        fulldex:{
            0: { name: "victini", type: "Psychic/Fire", image: "images/B2W2/victini.png" },
            },
        isleofarmor: {
            0: { name: "victini", type: "Psychic/Fire", image: "images/B2W2/victini.png" },
        },
        crowntundra: {
            0: { name: "victini", type: "Psychic/Fire", image: "images/B2W2/victini.png" },
        },
},
    shield: {
        fulldex:{
            0: { name: "victini", type: "Psychic/Fire", image: "images/B2W2/victini.png" },
            },
        isleofarmor: {
            0: { name: "victini", type: "Psychic/Fire", image: "images/B2W2/victini.png" },
        },
        crowntundra: {
            0: { name: "victini", type: "Psychic/Fire", image: "images/B2W2/victini.png" },
        },
},
    brilliantdiamond: {
    0: { name: "victini", type: "Psychic/Fire", image: "images/B2W2/victini.png" },
},
    shiningpearl: {
    0: { name: "victini", type: "Psychic/Fire", image: "images/B2W2/victini.png" },
},
    arceus: {
    0: { name: "victini", type: "Psychic/Fire", image: "images/B2W2/victini.png" },
},
    scarlet: {
        fulldex:{
            0: { name: "victini", type: "Psychic/Fire", image: "images/B2W2/victini.png" },
        },
        kitakami: {
            0: { name: "victini", type: "Psychic/Fire", image: "images/B2W2/victini.png" },
        },
        blueberry: {
            0: { name: "victini", type: "Psychic/Fire", image: "images/B2W2/victini.png" },
        }
},
    violet: {
        fulldex:{
            0: { name: "victini", type: "Psychic/Fire", image: "images/B2W2/victini.png" },
            },
        kitakami: {
            0: { name: "victini", type: "Psychic/Fire", image: "images/B2W2/victini.png" },
        },
        blueberry: {
            0: { name: "victini", type: "Psychic/Fire", image: "images/B2W2/victini.png" },
        },
},
    za: {
        fulldex:{
            0: { name: "victini", type: "Psychic/Fire", image: "images/B2W2/victini.png" },
    
        megadex: {
            0: { name: "victini", type: "Psychic/Fire", image: "images/B2W2/victini.png" },
        },
        megadem: {
            0: { name: "victini", type: "Psychic/Fire", image: "images/B2W2/victini.png" },
        },
}


},

}

let currentGame = null
let currentSubdex = null

function selectGame(game) {
    currentGame = game.toLowerCase();
    currentSubdex = null;

    document.getElementById('game-selection').classList.add('hidden');
    document.getElementById('pokedex-section').classList.remove('hidden');

    setupSubdexBar(currentGame);
    loadPokedex(currentGame);
}


function setupSubdexBar(game) {
    const subdexBar = document.getElementById("subdex-bar");
    subdexBar.innerHTML = '';

    const gameData = pokedexData[game];

    // If game has nested dexes (like scarlet.fulldex)
    if (typeof gameData === "object" && !Array.isArray(gameData)) {
        const subdexKeys = Object.keys(gameData);

        // If first value is NOT a Pokémon object → it's a subdex structure
        if (typeof gameData[subdexKeys[0]] === "object" && !gameData[subdexKeys[0]].name) {
            subdexBar.classList.remove("hidden");

            subdexKeys.forEach(subdex => {
                const btn = document.createElement("div");
                btn.className = "subdex";
                btn.innerHTML = `
                    <img src="images/dexicons/${subdex}.png">
                    <p>${subdex}</p>
                `;

                btn.onclick = () => {
                    currentSubdex = subdex;
                    loadPokedex(game, subdex);
                };

                subdexBar.appendChild(btn);
            });

            // Auto-load first subdex
            currentSubdex = subdexKeys[0];
            loadPokedex(game, currentSubdex);
            return;
        }
    }

    // No subdexes
    subdexBar.classList.add("hidden");
}


function loadPokedex(game, subdex = null) {
    const pokemonGrid = document.getElementById("pokedex");
    pokemonGrid.innerHTML = '';

    let dexData = pokedexData[game];

    if (subdex && dexData[subdex]) {
        dexData = dexData[subdex];
    }

    for (let number in dexData) {
        const pokemon = dexData[number];
        if (!pokemon) continue;

        const key = subdex 
            ? `${game}-${subdex}-${number}`
            : `${game}-${number}`;

        const isCaught = localStorage.getItem(key) === 'true';

        const pokemonBox = document.createElement("div");
        pokemonBox.className = "pokemon-box";
        pokemonBox.innerHTML = `
            <div class="pokemon-number">#${number}</div>
            <div class="pokemon-name">${isCaught ? pokemon.name : '???'}</div>
            <div class="pokemon-status">${isCaught ? 'Caught ✔️' : 'Not Caught ❌'}</div>
            <img src="${isCaught ? pokemon.image : 'Placeholder.png'}">
        `;

        pokemonBox.onclick = () => {
            localStorage.setItem(key, !isCaught);
            loadPokedex(game, subdex);
        };

        pokemonGrid.appendChild(pokemonBox);
    }
}

function toggleCaughtStatus(game, number) {
    const isCaught = localStorage.getItem(`${game}-${number}`) === 'true';
    localStorage.setItem(`${game}-${number}`, !isCaught);

    // Reload grid
    loadPokedex(game);
}

function GameSelect() {
    document.getElementById('pokedex-section').classList.add('hidden');
    document.getElementById('game-selection').classList.remove('hidden');
}

function goBack() {
    document.getElementById('game-selection').classList.remove('hidden');
    document.getElementById('dex-buttons').classList.remove('hidden');
}

